<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customter Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>

    <!--<nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
          <a class="navbar-brand" href="home.html">CRM</a>
          <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav">
              <a class="nav-link active" aria-current="page" href="home.html">Home</a>
              <a class="nav-link" href="customer_details.html">Customer Details</a>
              <a class="nav-link" href="order_details.html">Order Details</a>
            </div>
          </div>
        </div>
      </nav>-->

    <div class="container">
        <h3>
            Fill out the details
        </h3>
    </div>
    <div class="container">
    <form action="add_order" id="addOrderForm" method="post">
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="CustomerID">CustomerID</label>
            <input type="text" class="form-control" name="CustomerID" id="CustomerID" placeholder="CustomerID">
          </div>
          <div class="form-group col-md-6">
            <label for="ProductName">Product Name</label>
            <input type="text" name="ProductName" class="form-control" id="ProductName" placeholder="Product Name">
          </div>
        </div>
        <div class="form-group col-md-6">
            <label for="Amount">Amount</label>
            <input type="text" name="Amount" class="form-control" id="Amount" placeholder="">
          </div>
        <div class="form-group col-md-6">
          <label for="Date">Date Of Purchase</label>
          <input type="date" name="Date" class="form-control" id="Date" placeholder="">
        </div>
        <button type="submit" class="btn btn-sm btn-success my-3" onclick="addOrder()">Submit</button>
      </form>
    </div>
</body>

<script>
  async function addOrder(){
    const form=document.getElementById('addOrderForm');
    const data={
      CustomerID:form.CustomerID.value,
      ProductName:form.ProductName.value,
      Amount:form.Amount.value,
      Date:form.Date.value
    };

    const response=await fetch('/add_order',{
      method:'POST',
      headers:{
        'Content-Type': 'application/json'
      },
      body:JSON.stringify(data)
    });

    const result=await response.json();
    alert(result.message);
    if(response.ok){
      location.reload();
    }

  }
</script>

</html>